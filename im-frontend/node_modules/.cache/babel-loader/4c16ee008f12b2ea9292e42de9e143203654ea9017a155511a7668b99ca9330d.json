{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Test Chat\", -1 /* HOISTED */);\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Register\", -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Login\", -1 /* HOISTED */);\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Add Friend\", -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Send Message\", -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Receive Message\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createCommentVNode(\" User Registration \"), _createElementVNode(\"div\", null, [_hoisted_2, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.registerUser.username = $event),\n    placeholder: \"username\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.registerUser.username]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.registerUser.email = $event),\n    placeholder: \"email\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.registerUser.email]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.registerUser.password = $event),\n    placeholder: \"password\",\n    type: \"password\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.registerUser.password]]), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $setup.register && $setup.register(...args))\n  }, \"Register\")]), _createCommentVNode(\" User Login \"), _createElementVNode(\"div\", null, [_hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.loginUser.email = $event),\n    placeholder: \"email\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.loginUser.email]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.loginUser.password = $event),\n    placeholder: \"password\",\n    type: \"password\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.loginUser.password]]), _createElementVNode(\"button\", {\n    onClick: _cache[6] || (_cache[6] = (...args) => $setup.login && $setup.login(...args))\n  }, \"Login\")]), _createCommentVNode(\" Add Friend \"), _createElementVNode(\"div\", null, [_hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.friendId = $event),\n    placeholder: \"friend's ID\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.friendId]]), _createElementVNode(\"button\", {\n    onClick: _cache[8] || (_cache[8] = (...args) => $setup.addFriend && $setup.addFriend(...args))\n  }, \"Add Friend\")]), _createCommentVNode(\" Send Message \"), _createElementVNode(\"div\", null, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $setup.friendId = $event),\n    placeholder: \"friend's ID\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.friendId]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => $setup.message = $event),\n    placeholder: \"message\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.message]]), _createElementVNode(\"button\", {\n    onClick: _cache[11] || (_cache[11] = (...args) => $setup.sendMessage && $setup.sendMessage(...args))\n  }, \"Send Message\")]), _createCommentVNode(\" Receive Message \"), _createElementVNode(\"div\", null, [_hoisted_6, _createElementVNode(\"text\", null, _toDisplayString($setup.receiveMessage), 1 /* TEXT */)])]);\n}","map":{"version":3,"names":["_createElementVNode","_createElementBlock","_hoisted_1","_createCommentVNode","_hoisted_2","$setup","registerUser","username","$event","placeholder","email","password","type","onClick","_cache","args","register","_hoisted_3","loginUser","login","_hoisted_4","friendId","addFriend","_hoisted_5","message","sendMessage","_hoisted_6","_toDisplayString","receiveMessage"],"sources":["/Users/lynneu/Documents/GitHub/im-frontend/src/components/HelloWorld.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>Test Chat</h1>\n\n    <!-- User Registration -->\n    <div>\n      <h2>Register</h2>\n      <input v-model=\"registerUser.username\" placeholder=\"username\" />\n      <input v-model=\"registerUser.email\" placeholder=\"email\" />\n      <input v-model=\"registerUser.password\" placeholder=\"password\" type=\"password\" />\n      <button @click=\"register\">Register</button>\n    </div>\n\n    <!-- User Login -->\n    <div>\n      <h2>Login</h2>\n      <input v-model=\"loginUser.email\" placeholder=\"email\" />\n      <input v-model=\"loginUser.password\" placeholder=\"password\" type=\"password\" />\n      <button @click=\"login\">Login</button>\n    </div>\n\n    <!-- Add Friend -->\n    <div>\n      <h2>Add Friend</h2>\n      <input v-model=\"friendId\" placeholder=\"friend's ID\" />\n      <button @click=\"addFriend\">Add Friend</button>\n    </div>\n\n    <!-- Send Message -->\n    <div>\n      <h2>Send Message</h2>\n      <input v-model=\"friendId\" placeholder=\"friend's ID\" />\n      <input v-model=\"message\" placeholder=\"message\" />\n      <button @click=\"sendMessage\">Send Message</button>\n    </div>\n\n     <!-- Receive Message -->\n     <div>\n      <h2>Receive Message</h2>\n      <text>{{ receiveMessage }}</text>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport { ref, reactive } from \"vue\";\nimport axios from 'axios';\n\nexport default {\n  name: 'HelloWorld',\n  setup() {\n    const registerUser = reactive({\n      username: '',\n      email: '',\n      password: '',\n    });\n    \n    const loginUser = reactive({\n      email: '',\n      password: '',\n    });\n\n    const friendId = ref(\"\");\n    const message = ref(\"\");\n    const receiveMessage = ref(\"\")\n    let socket = null;\n\n    const register = async () => {\n      try {\n        const response = await axios.post(\"http://localhost:8000/users/\", {\n          username: registerUser.username,\n          email: registerUser.email,\n          password: registerUser.password,\n        });\n        console.log(response.data);\n        connectSocket(response.data.id);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const login = async () => {\n      try {\n        // Assuming you have a login endpoint\n        const response = await axios.post(\"http://localhost:8000/login\", {\n          email: loginUser.email,\n          password: loginUser.password,\n        });\n        console.log(response.data);\n        connectSocket(response.data.id);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const addFriend = async () => {\n      try {\n        // Assuming logged user's id is stored in localStorage\n        const userId = localStorage.getItem(\"userId\");\n        await axios.put(`http://localhost:8000/users/${userId}/friends/${friendId.value}`);\n        alert('Friend added successfully');\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const connectSocket = (userId) => {\n      socket = new WebSocket(\"ws://localhost:8000/ws/\" + userId);\n\n      socket.onopen = () => {\n        console.log(\"success!\")\n      }\n      socket.onmessage = (event) => {\n        console.log(\"Message from server: \", event.data);\n        receiveMessage.value += event.data;\n      };\n      socket.onclose = (event) => {\n      console.log(\"Socket closed\", event);\n};\n\n    };\n\n    const sendMessage = () => {\n      if (socket && socket.readyState === WebSocket.OPEN) {\n        socket.send(JSON.stringify({\n          receiver_id: friendId.value,\n          content: message.value\n        }));\n        message.value = \"\";\n      }\n    };\n\n    return {\n      registerUser,\n      loginUser,\n      friendId,\n      message,\n      receiveMessage,\n      register,\n      login,\n      addFriend,\n      sendMessage,\n    };\n  },\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}