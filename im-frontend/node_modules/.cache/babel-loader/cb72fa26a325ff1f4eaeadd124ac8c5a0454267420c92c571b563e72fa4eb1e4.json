{"ast":null,"code":"import { ref } from \"vue\";\nimport axios from 'axios';\nexport default {\n  setup() {\n    const username = ref(\"\");\n    const email = ref(\"\");\n    const password = ref(\"\");\n    const friendId = ref(\"\");\n    const message = ref(\"\");\n    let socket = null;\n    const register = async () => {\n      try {\n        const response = await axios.post(\"http://localhost:8000/users/\", {\n          username: username.value,\n          email: email.value,\n          password: password.value\n        });\n        console.log(response.data);\n        connectSocket(response.data.id);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const connectSocket = userId => {\n      socket = new WebSocket(\"ws://localhost:8000/ws/\" + userId);\n      socket.onopen = () => {\n        console.log(\"success!\");\n      };\n      socket.onmessage = event => {\n        console.log(\"Message from server: \", event.data);\n      };\n    };\n    const sendMessage = () => {\n      if (socket && socket.readyState === WebSocket.OPEN) {\n        socket.send(JSON.stringify({\n          receiver_id: friendId.value,\n          content: message.value\n        }));\n        message.value = \"\";\n        socket.onopen = () => {\n          console.log(\"success send!\");\n        };\n      }\n    };\n    return {\n      username,\n      email,\n      password,\n      friendId,\n      message,\n      register,\n      sendMessage\n    };\n  }\n};","map":{"version":3,"names":["ref","axios","setup","username","email","password","friendId","message","socket","register","response","post","value","console","log","data","connectSocket","id","error","userId","WebSocket","onopen","onmessage","event","sendMessage","readyState","OPEN","send","JSON","stringify","receiver_id","content"],"sources":["/Users/lynneu/Documents/GitHub/im-frontend/src/components/HelloWorld.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>Test Chat</h1>\n\n    <!-- User Registration -->\n    <div>\n      <h2>Register</h2>\n      <input v-model=\"username\" placeholder=\"username\" />\n      <input v-model=\"email\" placeholder=\"email\" />\n      <input v-model=\"password\" placeholder=\"password\" type=\"password\" />\n      <button @click=\"register\">Register</button>\n    </div>\n\n    <!-- Send Message -->\n    <div>\n      <h2>Send Message</h2>\n      <input v-model=\"friendId\" placeholder=\"friend's ID\" />\n      <input v-model=\"message\" placeholder=\"message\" />\n      <button @click=\"sendMessage\">Send Message</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport axios from 'axios';\n\nexport default {\n  setup() {\n    const username = ref(\"\");\n    const email = ref(\"\");\n    const password = ref(\"\");\n    const friendId = ref(\"\");\n    const message = ref(\"\");\n    let socket = null;\n\n    const register = async () => {\n      try {\n        const response = await axios.post(\"http://localhost:8000/users/\", {\n          username: username.value,\n          email: email.value,\n          password: password.value,\n        });\n        console.log(response.data);\n        connectSocket(response.data.id);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const connectSocket = (userId) => {\n      socket = new WebSocket(\"ws://localhost:8000/ws/\" + userId);\n\n      socket.onopen = () => {\n        console.log(\"success!\")\n      }\n      socket.onmessage = (event) => {\n        console.log(\"Message from server: \", event.data);\n      };\n    };\n\n    const sendMessage = () => {\n      if (socket && socket.readyState === WebSocket.OPEN) {\n        socket.send(JSON.stringify({\n          receiver_id: friendId.value,\n          content: message.value\n        }));\n        message.value = \"\";\n        socket.onopen = () => {\n          console.log(\"success send!\")\n      }\n      }\n    };\n\n    return {\n      username,\n      email,\n      password,\n      friendId,\n      message,\n      register,\n      sendMessage,\n    };\n  },\n};\n</script>\n"],"mappings":"AAwBA,SAASA,GAAE,QAAS,KAAK;AACzB,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,QAAO,GAAIH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,KAAI,GAAIJ,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMK,QAAO,GAAIL,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMM,QAAO,GAAIN,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMO,OAAM,GAAIP,GAAG,CAAC,EAAE,CAAC;IACvB,IAAIQ,MAAK,GAAI,IAAI;IAEjB,MAAMC,QAAO,GAAI,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMT,KAAK,CAACU,IAAI,CAAC,8BAA8B,EAAE;UAChER,QAAQ,EAAEA,QAAQ,CAACS,KAAK;UACxBR,KAAK,EAAEA,KAAK,CAACQ,KAAK;UAClBP,QAAQ,EAAEA,QAAQ,CAACO;QACrB,CAAC,CAAC;QACFC,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAACK,IAAI,CAAC;QAC1BC,aAAa,CAACN,QAAQ,CAACK,IAAI,CAACE,EAAE,CAAC;MACjC,EAAE,OAAOC,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAACA,KAAK,CAAC;MACtB;IACF,CAAC;IAED,MAAMF,aAAY,GAAKG,MAAM,IAAK;MAChCX,MAAK,GAAI,IAAIY,SAAS,CAAC,yBAAwB,GAAID,MAAM,CAAC;MAE1DX,MAAM,CAACa,MAAK,GAAI,MAAM;QACpBR,OAAO,CAACC,GAAG,CAAC,UAAU;MACxB;MACAN,MAAM,CAACc,SAAQ,GAAKC,KAAK,IAAK;QAC5BV,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAES,KAAK,CAACR,IAAI,CAAC;MAClD,CAAC;IACH,CAAC;IAED,MAAMS,WAAU,GAAIA,CAAA,KAAM;MACxB,IAAIhB,MAAK,IAAKA,MAAM,CAACiB,UAAS,KAAML,SAAS,CAACM,IAAI,EAAE;QAClDlB,MAAM,CAACmB,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;UACzBC,WAAW,EAAExB,QAAQ,CAACM,KAAK;UAC3BmB,OAAO,EAAExB,OAAO,CAACK;QACnB,CAAC,CAAC,CAAC;QACHL,OAAO,CAACK,KAAI,GAAI,EAAE;QAClBJ,MAAM,CAACa,MAAK,GAAI,MAAM;UACpBR,OAAO,CAACC,GAAG,CAAC,eAAe;QAC/B;MACA;IACF,CAAC;IAED,OAAO;MACLX,QAAQ;MACRC,KAAK;MACLC,QAAQ;MACRC,QAAQ;MACRC,OAAO;MACPE,QAAQ;MACRe;IACF,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}